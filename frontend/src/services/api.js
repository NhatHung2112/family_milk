const API_URL = "http://localhost:8000"; // Đảm bảo Backend đang chạy ở cổng này

export const api = {
  // Lấy danh sách sản phẩm
  getProducts: async () => {
    const res = await fetch(`${API_URL}/products`);
    return res.json();
  },

  // Tạo sản phẩm mới
  createProduct: async (productData) => {
    const res = await fetch(`${API_URL}/create_product`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(productData),
    });
    return res.json();
  },

  // Xác thực sản phẩm (Tra cứu)
  verifyProduct: async (uid) => {
    const res = await fetch(`${API_URL}/verify/${uid}`);
    return res.json();
  },

  // Ghi lại lịch sử quét
  recordScan: async (uid, location) => {
    await fetch(`${API_URL}/record_scan`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ uid, location }),
    });
  },

  // Lấy lịch sử quét (Cho Admin)
  getHistory: async () => {
    const res = await fetch(`${API_URL}/scan_history`);
    return res.json();
  },

  // Chat với AI
  askAI: async (productName, question) => {
    const res = await fetch(`${API_URL}/ask_ai`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ product_name: productName, question }),
    });
    return res.json();
  },
};
